import{c as we,a as c,f as $,t as xe,s as A}from"../chunks/DXVr3TX4.js";import{i as ca}from"../chunks/CL5J6ee3.js";import{f as T,p as va,o as ua,l as Ge,a as pa,g as e,b as ma,m as C,c as t,s as r,d as l,t as M,h as X,e as He,n as P,r as a,i as Ie,u as v}from"../chunks/yKYHuomA.js";import{l as Xe,b as Ye,i as pe}from"../chunks/01UUdhOg.js";import{I as Ze,c as qe,e as be,b as Le,r as fa,i as $e}from"../chunks/TgNKz3rK.js";import{b as _a}from"../chunks/BoqKQ0gE.js";import{B as Y,C as Je}from"../chunks/CMzhJ-sK.js";import{I as me}from"../chunks/Ul1sdv7C.js";import{B as ha}from"../chunks/Ba5MWzQS.js";import{M as ga}from"../chunks/CaCDDUcm.js";import{S as fe}from"../chunks/Cw1zHoOm.js";import{W as Qe}from"../chunks/1lpZ40RF.js";import{S as xa}from"../chunks/BjTjAT_z.js";import{P as ba}from"../chunks/CnIMmsLf.js";import{B as Ve}from"../chunks/C4fjolrh.js";import{S as $a}from"../chunks/CAPDtyWD.js";import{T as wa}from"../chunks/B4UXOIAF.js";import{C as ya}from"../chunks/BkbHu8l_.js";import{M as ka}from"../chunks/BMl328JV.js";import{C as Na}from"../chunks/BUY1kFW0.js";function Ke(se,F){const D=Xe(F,["children","$$slots","$$events","$$legacy"]);const z=[["path",{d:"M12 20v2"}],["path",{d:"M12 2v2"}],["path",{d:"M17 20v2"}],["path",{d:"M17 2v2"}],["path",{d:"M2 12h2"}],["path",{d:"M2 17h2"}],["path",{d:"M2 7h2"}],["path",{d:"M20 12h2"}],["path",{d:"M20 17h2"}],["path",{d:"M20 7h2"}],["path",{d:"M7 20v2"}],["path",{d:"M7 2v2"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1"}]];Ze(se,Ye({name:"cpu"},()=>D,{get iconNode(){return z},children:(U,W)=>{var B=we(),S=T(B);qe(S,F,"default",{}),c(U,B)},$$slots:{default:!0}}))}function Ca(se,F){const D=Xe(F,["children","$$slots","$$events","$$legacy"]);const z=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor"}]];Ze(se,Ye({name:"tag"},()=>D,{get iconNode(){return z},children:(U,W)=>{var B=we(),S=T(B);qe(S,F,"default",{}),c(U,B)},$$slots:{default:!0}}))}var Sa=$("<!> Novo Equipamento",1),Ea=$('<div class="flex items-center gap-4 mb-6"><!> <div class="flex-1 space-y-2"><!> <!></div></div> <div class="space-y-3"><!> <!></div>',1),Ma=$('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>'),Pa=$('<div class="py-20 text-center bg-white rounded-[3rem] border-2 border-dashed border-surface-200"><div class="w-24 h-24 bg-surface-50 rounded-full flex items-center justify-center mx-auto mb-6"><!></div> <h3 class="text-2xl font-black text-surface-900">Nenhum equipamento encontrado</h3> <p class="text-surface-500 font-bold mt-2 max-w-sm mx-auto"> </p> <!></div>'),za=$('<div class="flex items-center gap-3 text-sm font-bold text-surface-500"><div class="w-8 h-8 rounded-lg bg-surface-50 flex items-center justify-center text-surface-400"><!></div> <span class="truncate"> </span></div>'),Ba=$("Ver Detalhes <!>",1),Ia=$('<div class="flex items-start justify-between mb-6"><div class="flex items-center gap-4"><div class="w-14 h-14 rounded-2xl bg-brand-50 text-brand-600 flex items-center justify-center font-black text-2xl group-hover:bg-brand-600 group-hover:text-white transition-all duration-300"><!></div> <div class="min-w-0"><h3 class="font-black text-surface-900 truncate group-hover:text-brand-700 transition-colors"> </h3> <!></div></div> <div class="flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity"><!> <!></div></div> <div class="space-y-4"><div class="flex items-center gap-3 text-sm font-bold text-surface-500"><div class="w-8 h-8 rounded-lg bg-surface-50 flex items-center justify-center text-surface-400"><!></div> <span class="truncate"> </span></div> <div class="flex items-center gap-3 text-sm font-bold text-surface-500"><div class="w-8 h-8 rounded-lg bg-surface-50 flex items-center justify-center text-surface-400"><!></div> <span> </span></div> <div class="flex items-center gap-3 text-sm font-bold text-surface-500"><div class="w-8 h-8 rounded-lg bg-surface-50 flex items-center justify-center text-surface-400"><!></div> <span class="truncate"> </span></div> <!></div> <div class="mt-8 pt-6 border-t border-surface-100"><!></div>',1),La=$('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>'),ja=$("<option> </option>"),Aa=$("<option> </option>"),Ta=$('<div class="space-y-8 py-4"><div class="space-y-6"><h4 class="text-xs font-black text-surface-400 uppercase tracking-widest flex items-center gap-2"><!> Localização</h4> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div class="space-y-2"><label for="client-select" class="text-xs font-black uppercase tracking-widest text-surface-500 ml-1">Cliente</label> <select id="client-select" class="w-full h-12 px-4 bg-surface-50 border border-surface-200 rounded-xl font-bold text-surface-900 outline-none focus:border-brand-500 transition-all appearance-none"><option>Selecione um cliente</option><!></select></div> <div class="space-y-2"><label for="location-select" class="text-xs font-black uppercase tracking-widest text-surface-500 ml-1">Local / Unidade</label> <select id="location-select" class="w-full h-12 px-4 bg-surface-50 border border-surface-200 rounded-xl font-bold text-surface-900 outline-none focus:border-brand-500 transition-all appearance-none disabled:opacity-50"><option>Selecione um local</option><!></select></div></div></div> <div class="space-y-6"><h4 class="text-xs font-black text-surface-400 uppercase tracking-widest flex items-center gap-2"><!> Especificações</h4> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div class="md:col-span-2"><!></div> <!> <!> <!> <!> <div class="space-y-2"><label for="type-select" class="text-xs font-black uppercase tracking-widest text-surface-500 ml-1">Tipo</label> <select id="type-select" class="w-full h-12 px-4 bg-surface-50 border border-surface-200 rounded-xl font-bold text-surface-900 outline-none focus:border-brand-500 transition-all appearance-none"><option>Ar Condicionado</option><option>Refrigerador</option><option>Freezer</option><option>Outro</option></select></div></div></div> <div class="pt-6 flex gap-4"><!> <!></div></div>'),Da=$(`<div class="min-h-screen bg-surface-50 pb-24"><div class="bg-white border-b border-surface-200 px-4 py-8"><div class="max-w-7xl mx-auto flex flex-col md:flex-row md:items-center justify-between gap-6"><div><h1 class="text-4xl font-black text-surface-900 tracking-tight flex items-center gap-3"><!> Equipamentos</h1> <p class="text-surface-500 font-bold mt-2">Gerencie o inventário de máquinas e dispositivos dos
                    clientes</p></div> <!></div></div> <div class="max-w-7xl mx-auto px-4 py-8 space-y-8"><div class="relative group"><!> <input type="text" placeholder="Buscar por nome, marca, modelo ou série..." class="w-full h-16 pl-16 pr-6 bg-white border border-surface-200 rounded-[2rem] font-bold text-surface-900 outline-none focus:border-brand-500 focus:ring-8 focus:ring-brand-500/5 transition-all shadow-sm"/></div> <!></div></div> <!>`,1);function st(se,F){va(F,!1);const D=C(),z=C();let U=C([]),W=C([]),B=C(!0),S=C(!1),Z=C(null),ye=C(!1),E=C(""),i=C({nome:"",marca:"",modelo:"",numero_serie:"",tipo_equipamento:"ar_condicionado",data_instalacao:"",location_id:null}),I=C(null);async function ke(){l(B,!0);try{const o=localStorage.getItem("token"),[d,f]=await Promise.all([fetch("/api/equipamentos",{headers:{Authorization:`Bearer ${o}`}}),fetch("/api/clientes",{headers:{Authorization:`Bearer ${o}`}})]);d.ok&&l(U,await d.json()),f.ok&&l(W,await f.json())}catch(o){console.error("Erro ao carregar dados:",o)}finally{l(B,!1)}}async function ea(){if(!e(i).location_id){alert("Selecione um local para o equipamento");return}l(ye,!0);try{const o=localStorage.getItem("token"),d=e(Z)?"PUT":"POST",f=e(Z)?`/api/equipamentos/${e(Z).id}`:"/api/equipamentos";(await fetch(f,{method:d,headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify(e(i))})).ok&&(l(S,!1),je(),await ke())}catch(o){console.error("Erro ao salvar:",o)}finally{l(ye,!1)}}async function aa(o){if(confirm("Excluir este equipamento?"))try{const d=localStorage.getItem("token");await fetch(`/api/equipamentos/${o}`,{method:"DELETE",headers:{Authorization:`Bearer ${d}`}}),await ke()}catch(d){console.error("Erro ao excluir:",d)}}function je(){l(i,{nome:"",marca:"",modelo:"",numero_serie:"",tipo_equipamento:"ar_condicionado",data_instalacao:"",location_id:null}),l(I,null),l(Z,null)}function Ae(o){l(Z,o),l(i,{nome:o.nome,marca:o.marca,modelo:o.modelo,numero_serie:o.numero_serie,tipo_equipamento:o.tipo_equipamento,data_instalacao:o.data_instalacao?.split("T")[0]||"",location_id:o.locationId});const d=e(W).find(f=>f.locations.some(w=>w.id===o.locationId));d&&l(I,d.id),l(S,!0)}function ta(){je(),l(S,!0)}ua(()=>{ke()}),Ge(()=>(e(U),e(E)),()=>{l(D,e(U).filter(o=>o.nome.toLowerCase().includes(e(E).toLowerCase())||o.marca?.toLowerCase().includes(e(E).toLowerCase())||o.modelo?.toLowerCase().includes(e(E).toLowerCase())||o.numero_serie?.includes(e(E))))}),Ge(()=>(e(W),e(I)),()=>{l(z,e(W).find(o=>o.id===e(I)))}),pa(),ca();var Te=Da(),Ne=T(Te),Ce=t(Ne),De=t(Ce),Se=t(De),We=t(Se),ra=t(We);Qe(ra,{class:"w-10 h-10 text-brand-600"}),P(),a(We),P(2),a(Se);var oa=r(Se,2);Y(oa,{variant:"primary",size:"lg",className:"shadow-xl shadow-brand-500/20",$$events:{click:ta},children:(o,d)=>{var f=Sa(),w=T(f);ba(w,{class:"w-5 h-5 mr-2"}),P(),c(o,f)},$$slots:{default:!0}}),a(De),a(Ce);var Oe=r(Ce,2),Ee=t(Oe),Re=t(Ee);xa(Re,{class:"absolute left-6 top-1/2 -translate-y-1/2 w-6 h-6 text-surface-400 group-focus-within:text-brand-500 transition-colors"});var Fe=r(Re,2);fa(Fe),a(Ee);var sa=r(Ee,2);{var ia=o=>{var d=Ma();be(d,4,()=>Array(6),$e,(f,w)=>{Je(f,{padding:"p-6",children:(G,y)=>{var _=Ea(),h=T(_),s=t(h);fe(s,{className:"w-14 h-14 rounded-2xl"});var g=r(s,2),L=t(g);fe(L,{className:"w-3/4 h-5"});var O=r(L,2);fe(O,{className:"w-1/2 h-3"}),a(g),a(h);var k=r(h,2),p=t(k);fe(p,{className:"w-full h-4"});var N=r(p,2);fe(N,{className:"w-full h-4"}),a(k),c(G,_)},$$slots:{default:!0}})}),a(d),c(o,d)},na=o=>{var d=we(),f=T(d);{var w=y=>{var _=Pa(),h=t(_),s=t(h);Qe(s,{class:"w-12 h-12 text-surface-200"}),a(h);var g=r(h,4),L=t(g,!0);a(g);var O=r(g,2);{var k=p=>{Y(p,{variant:"ghost",className:"mt-6",$$events:{click:()=>l(E,"")},children:(N,_e)=>{P();var q=xe("Limpar Busca");c(N,q)},$$slots:{default:!0}})};pe(O,p=>{e(E)&&p(k)})}a(_),M(()=>A(L,e(E)?"Não encontramos resultados para sua busca. Tente outros termos.":"Seu inventário está vazio. Comece cadastrando um novo equipamento.")),c(y,_)},G=y=>{var _=La();be(_,5,()=>e(D),$e,(h,s)=>{Je(h,{padding:"p-6",className:"group hover:border-brand-500 hover:shadow-2xl hover:shadow-brand-500/10 transition-all duration-300",children:(g,L)=>{var O=Ia(),k=T(O),p=t(k),N=t(p),_e=t(N);Ke(_e,{class:"w-8 h-8"}),a(N);var q=r(N,2),H=t(q),ie=t(H,!0);a(H);var Me=r(H,2);ha(Me,{variant:"neutral",size:"sm",className:"mt-1",children:(u,K)=>{P();var j=xe();M(()=>A(j,(e(s),v(()=>e(s).tipo_equipamento==="ar_condicionado"?"Ar Condicionado":e(s).tipo_equipamento)))),c(u,j)},$$slots:{default:!0}}),a(q),a(p);var ne=r(p,2),ee=t(ne);Y(ee,{variant:"ghost",size:"sm",className:"p-2",$$events:{click:()=>Ae(e(s))},children:(u,K)=>{$a(u,{class:"w-4 h-4"})},$$slots:{default:!0}});var Pe=r(ee,2);Y(Pe,{variant:"ghost",size:"sm",className:"p-2 text-red-500 hover:bg-red-50",$$events:{click:()=>aa(e(s).id)},children:(u,K)=>{wa(u,{class:"w-4 h-4"})},$$slots:{default:!0}}),a(ne),a(k);var ae=r(k,2),te=t(ae),re=t(te),he=t(re);Ca(he,{class:"w-4 h-4"}),a(re);var le=r(re,2),de=t(le);a(le),a(te);var J=r(te,2),Q=t(J),ce=t(Q);ya(ce,{class:"w-4 h-4"}),a(Q);var ve=r(Q,2),ge=t(ve);a(ve),a(J);var oe=r(J,2),ue=t(oe),n=t(ue);ka(n,{class:"w-4 h-4"}),a(ue);var m=r(ue,2),x=t(m);a(m),a(oe);var V=r(oe,2);{var b=u=>{var K=za(),j=t(K),Be=t(j);Ve(Be,{class:"w-4 h-4"}),a(j);var Ue=r(j,2),da=t(Ue);a(Ue),a(K),M(()=>A(da,`${e(s),v(()=>e(s).client_name)??""} - ${e(s),v(()=>e(s).location_name||"Sede")??""}`)),c(u,K)};pe(V,u=>{e(s),v(()=>e(s).client_name)&&u(b)})}a(ae);var R=r(ae,2),ze=t(R);Y(ze,{variant:"secondary",fullWidth:!0,$$events:{click:()=>Ae(e(s))},children:(u,K)=>{P();var j=Ba(),Be=r(T(j));Na(Be,{class:"w-4 h-4 ml-2"}),c(u,j)},$$slots:{default:!0}}),a(R),M(u=>{A(ie,(e(s),v(()=>e(s).nome))),A(de,`${e(s),v(()=>e(s).marca)??""} ${e(s),v(()=>e(s).modelo)??""}`),A(ge,`Instalado em: ${u??""}`),A(x,`S/N: ${e(s),v(()=>e(s).numero_serie||"N/A")??""}`)},[()=>(e(s),v(()=>e(s).data_instalacao?new Date(e(s).data_instalacao).toLocaleDateString("pt-BR"):"N/A"))]),c(g,O)},$$slots:{default:!0}})}),a(_),c(y,_)};pe(f,y=>{e(D),v(()=>e(D).length===0)?y(w):y(G,!1)},!0)}c(o,d)};pe(sa,o=>{e(B)?o(ia):o(na,!1)})}a(Oe),a(Ne);var la=r(Ne,2);{let o=He(()=>e(Z)?"Editar Equipamento":"Novo Equipamento");ga(la,{get isOpen(){return e(S)},get title(){return e(o)},onClose:()=>l(S,!1),children:(d,f)=>{var w=Ta(),G=t(w),y=t(G),_=t(y);Ve(_,{class:"w-3 h-3"}),P(),a(y);var h=r(y,2),s=t(h),g=r(t(s),2);M(()=>{e(I),Ie(()=>{e(W)})});var L=t(g);L.value=(L.__value=null)??"";var O=r(L);be(O,1,()=>e(W),$e,(n,m)=>{var x=ja(),V=t(x,!0);a(x);var b={};M(()=>{A(V,(e(m),v(()=>e(m).nome))),b!==(b=(e(m),v(()=>e(m).id)))&&(x.value=(x.__value=(e(m),v(()=>e(m).id)))??"")}),c(n,x)}),a(g),a(s);var k=r(s,2),p=r(t(k),2);M(()=>{e(i),Ie(()=>{e(I),e(z)})});var N=t(p);N.value=(N.__value=null)??"";var _e=r(N);{var q=n=>{var m=we(),x=T(m);be(x,1,()=>(e(z),v(()=>e(z).locations)),$e,(V,b)=>{var R=Aa(),ze=t(R,!0);a(R);var u={};M(()=>{A(ze,(e(b),v(()=>e(b).nickname||e(b).city))),u!==(u=(e(b),v(()=>e(b).id)))&&(R.value=(R.__value=(e(b),v(()=>e(b).id)))??"")}),c(V,R)}),c(n,m)};pe(_e,n=>{e(z)&&n(q)})}a(p),a(k),a(h),a(G);var H=r(G,2),ie=t(H),Me=t(ie);Ke(Me,{class:"w-3 h-3"}),P(),a(ie);var ne=r(ie,2),ee=t(ne),Pe=t(ee);me(Pe,{label:"Nome do Equipamento",placeholder:"Ex: Ar Condicionado Central",get value(){return e(i).nome},set value(n){X(i,e(i).nome=n)},$$legacy:!0}),a(ee);var ae=r(ee,2);me(ae,{label:"Marca",placeholder:"Ex: Samsung, LG, Carrier",get value(){return e(i).marca},set value(n){X(i,e(i).marca=n)},$$legacy:!0});var te=r(ae,2);me(te,{label:"Modelo",placeholder:"Ex: WindFree 12000 BTU",get value(){return e(i).modelo},set value(n){X(i,e(i).modelo=n)},$$legacy:!0});var re=r(te,2);me(re,{label:"Número de Série",placeholder:"Ex: SN123456789",get value(){return e(i).numero_serie},set value(n){X(i,e(i).numero_serie=n)},$$legacy:!0});var he=r(re,2);me(he,{label:"Data de Instalação",type:"date",get value(){return e(i).data_instalacao},set value(n){X(i,e(i).data_instalacao=n)},$$legacy:!0});var le=r(he,2),de=r(t(le),2);M(()=>{e(i),Ie(()=>{})});var J=t(de);J.value=J.__value="ar_condicionado";var Q=r(J);Q.value=Q.__value="refrigerador";var ce=r(Q);ce.value=ce.__value="freezer";var ve=r(ce);ve.value=ve.__value="outro",a(de),a(le),a(ne),a(H);var ge=r(H,2),oe=t(ge);Y(oe,{variant:"secondary",fullWidth:!0,$$events:{click:()=>l(S,!1)},children:(n,m)=>{P();var x=xe("Cancelar");c(n,x)},$$slots:{default:!0}});var ue=r(oe,2);{let n=He(()=>(e(i),v(()=>!e(i).location_id||!e(i).nome)));Y(ue,{variant:"primary",fullWidth:!0,get loading(){return e(ye)},get disabled(){return e(n)},$$events:{click:ea},children:(m,x)=>{P();var V=xe("Salvar Equipamento");c(m,V)},$$slots:{default:!0}})}a(ge),a(w),M(()=>p.disabled=!e(I)),Le(g,()=>e(I),n=>l(I,n)),Le(p,()=>e(i).location_id,n=>X(i,e(i).location_id=n)),Le(de,()=>e(i).tipo_equipamento,n=>X(i,e(i).tipo_equipamento=n)),c(d,w)},$$slots:{default:!0}})}_a(Fe,()=>e(E),o=>l(E,o)),c(se,Te),ma()}export{st as component};
