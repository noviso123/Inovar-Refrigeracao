import{f as w,e as Oe,a as n,t as Q,s as g,c as ge}from"../chunks/ChkOC8jJ.js";import{i as lt}from"../chunks/0BXEIW7p.js";import{p as dt,o as ct,l as he,a as vt,f as T,t as $,b as ut,g as e,m as P,c as a,e as V,s as o,d as c,n as U,r,u as l,i as De}from"../chunks/uipimv4g.js";import{i as W}from"../chunks/37VJptNz.js";import{r as ft,e as oe,i as ie,b as Fe,s as ne}from"../chunks/CVNGJ9si.js";import{b as pt}from"../chunks/D8wqnib1.js";import{g as be}from"../chunks/5eTJf3XV.js";import{B as X,C as le}from"../chunks/CcITqVFh.js";import{B as de}from"../chunks/20U3f4mM.js";import{S as Z}from"../chunks/s-rN9zZN.js";import{B as _t}from"../chunks/ChAELy75.js";import{C as mt}from"../chunks/DkluvB59.js";import{C as xt}from"../chunks/DsgNXrr_.js";import{R as gt}from"../chunks/DNnFxnH_.js";import{P as Le}from"../chunks/jw4NrPAd.js";import{S as ht}from"../chunks/Dr9_q4fJ.js";import{F as bt}from"../chunks/BHFMQ0l6.js";import{C as $t}from"../chunks/DCfE_4FL.js";import{C as wt}from"../chunks/BIl_OTr6.js";import{C as yt}from"../chunks/B6wGs7uP.js";import{M as kt}from"../chunks/BMqEMhkr.js";import{U as St}from"../chunks/DNG8nH_A.js";var Pt=w('<!> <span class="hidden sm:inline">Nova OS</span>',1),Ct=w("<!> <span>Filtros</span>",1),Tt=w("<option> </option>"),Nt=w("<option> </option>"),Ut=w('<div class="mt-4 pt-4 border-t border-surface-100 grid grid-cols-1 sm:grid-cols-2 gap-4 animate-in fade-in slide-in-from-top-2"><div class="space-y-1.5"><label for="filter-status" class="text-[10px] font-black text-surface-400 uppercase tracking-widest ml-1">Status</label> <select id="filter-status" class="w-full px-4 py-2.5 bg-surface-50 border border-surface-200 rounded-xl outline-none focus:border-brand-500 font-medium"><option>Todos os Status</option><!></select></div> <div class="space-y-1.5"><label for="filter-urgency" class="text-[10px] font-black text-surface-400 uppercase tracking-widest ml-1">Urgência</label> <select id="filter-urgency" class="w-full px-4 py-2.5 bg-surface-50 border border-surface-200 rounded-xl outline-none focus:border-brand-500 font-medium"><option>Todas as Urgências</option><!></select></div></div>'),jt=w('<div class="flex flex-col sm:flex-row gap-3"><div class="relative flex-1"><!> <input type="text" placeholder="Buscar por Nº ou título..." class="w-full pl-12 pr-4 py-3 bg-surface-50 border border-surface-200 rounded-xl outline-none focus:border-brand-500 focus:ring-4 focus:ring-brand-500/10 transition-all font-medium"/></div> <!></div> <!>',1),zt=w('<div class="flex justify-between mb-4"><!> <!></div> <!> <div class="flex gap-4"><!> <!></div>',1),Bt=w('<div class="p-4 bg-surface-50 rounded-full w-fit mx-auto mb-4"><!></div> <h3 class="text-xl font-bold text-surface-900">Nenhum serviço encontrado</h3> <p class="text-surface-500 mt-2">Tente ajustar seus filtros ou busca.</p> <!>',1),At=w('<div class="flex items-center gap-1.5"><!> </div>'),Rt=w('<div class="flex items-center gap-2"><!> <span class="text-xs font-bold text-surface-500"> </span></div>'),Et=w('<div class="flex items-center justify-between mb-3"><div class="flex items-center gap-3"><!> <!></div> <!></div> <h3 class="text-lg font-bold text-surface-900 group-hover:text-brand-700 transition-colors truncate"> </h3> <div class="flex flex-wrap items-center gap-x-6 gap-y-2 mt-3 text-sm font-medium text-surface-500"><div class="flex items-center gap-2"><div class="w-6 h-6 rounded-full bg-surface-100 flex items-center justify-center text-[10px] font-black text-surface-600"> </div> <span class="text-surface-900"> </span></div> <!> <div class="flex items-center gap-1.5"><!> </div></div> <div class="mt-4 pt-4 border-t border-surface-100 flex items-center justify-between"><div class="flex items-center gap-2"><div></div> <span> </span></div> <!></div>',1),Ot=w('<div class="space-y-6 pb-24"><div class="flex items-center justify-between"><div><h1 class="text-3xl font-extrabold text-surface-900 tracking-tight flex items-center gap-3"><!> Gestão de Serviços</h1> <p class="text-surface-500 mt-1 font-medium">Acompanhe e gerencie todas as ordens de serviço</p></div> <div class="flex gap-3"><!> <!></div></div> <div class="flex gap-2 p-1.5 bg-surface-100/50 backdrop-blur-sm rounded-2xl border border-surface-200"><button><!> <span>Em Aberto</span> <!></button> <button><!> <span>Finalizados</span> <!></button></div> <!> <div class="space-y-3"><!></div></div> <div class="fixed bottom-24 right-6 lg:hidden z-40"><!></div>',1);function ia(Ie,Me){dt(Me,!1);const I=P(),M=P(),q=P();let G=P([]),$e=P(!0),ee=P(!1),j=P("aberto"),F=P(""),te=P(!1),A=P(""),R=P("");const Ge=["pendente","agendado","em_andamento","aprovado"],Ye=["concluido","faturado","cancelado"],He=["pendente","agendado","em_andamento","concluido","cancelado","aprovado","faturado"],Je=["baixa","media","alta","critica"];async function we(){try{const s=localStorage.getItem("token"),i=await fetch("/api/solicitacoes",{headers:{Authorization:`Bearer ${s}`}});i.ok&&c(G,await i.json())}catch(s){console.error("Erro ao carregar solicitações:",s)}finally{c($e,!1)}}async function Ke(){c(ee,!0),await we(),c(ee,!1)}function Qe(s){return new Date(s).toLocaleDateString("pt-BR")}ct(()=>{we()}),he(()=>e(G),()=>{c(I,e(G).filter(s=>Ge.includes(s.status)))}),he(()=>e(G),()=>{c(M,e(G).filter(s=>Ye.includes(s.status)))}),he(()=>(e(j),e(I),e(M),e(F),e(A),e(R)),()=>{c(q,(e(j)==="aberto"?e(I):e(M)).filter(s=>{if(e(F)){const i=e(F).toLowerCase(),v=s.sequential_id?.toString()||"",d=s.titulo?.toLowerCase()||"";if(!v.includes(i)&&!d.includes(i))return!1}return!(e(A)&&s.status!==e(A)||e(R)&&s.priority!==e(R))}).sort((s,i)=>new Date(i.created_at).getTime()-new Date(s.created_at).getTime()))}),vt(),lt();var ye=Ot(),ce=T(ye),ve=a(ce),ue=a(ve),ke=a(ue),Ve=a(ke);_t(Ve,{class:"w-8 h-8 text-brand-600"}),U(),r(ke),U(2),r(ue);var Se=o(ue,2),Pe=a(Se);X(Pe,{variant:"secondary",get loading(){return e(ee)},$$events:{click:Ke},children:(s,i)=>{{let v=V(()=>e(ee)?"animate-spin":"");gt(s,{get class(){return`w-4 h-4 ${e(v)??""}`}})}},$$slots:{default:!0}});var We=o(Pe,2);X(We,{variant:"primary",$$events:{click:()=>be("/nova-solicitacao")},children:(s,i)=>{var v=Pt(),d=T(v);Le(d,{class:"w-5 h-5"}),U(2),n(s,v)},$$slots:{default:!0}}),r(Se),r(ve);var fe=o(ve,2),Y=a(fe),Ce=a(Y);mt(Ce,{class:"w-4 h-4"});var Xe=o(Ce,4);{let s=V(()=>e(j)==="aberto"?"brand":"neutral");de(Xe,{get variant(){return e(s)},size:"sm",children:(i,v)=>{U();var d=Q();$(()=>g(d,(e(I),l(()=>e(I).length)))),n(i,d)},$$slots:{default:!0}})}r(Y);var ae=o(Y,2),Te=a(ae);xt(Te,{class:"w-4 h-4"});var Ze=o(Te,4);{let s=V(()=>e(j)==="finalizado"?"brand":"neutral");de(Ze,{get variant(){return e(s)},size:"sm",children:(i,v)=>{U();var d=Q();$(()=>g(d,(e(M),l(()=>e(M).length)))),n(i,d)},$$slots:{default:!0}})}r(ae),r(fe);var Ne=o(fe,2);le(Ne,{padding:"p-4",children:(s,i)=>{var v=jt(),d=T(v),L=a(d),y=a(L);ht(y,{class:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-surface-400"});var z=o(y,2);ft(z),r(L);var E=o(L,2);{let p=V(()=>e(te)?"primary":"secondary");X(E,{get variant(){return e(p)},className:"sm:w-auto w-full",$$events:{click:()=>c(te,!e(te))},children:(k,h)=>{var f=Ct(),_=T(f);bt(_,{class:"w-5 h-5"}),U(2),n(k,f)},$$slots:{default:!0}})}r(d);var C=o(d,2);{var t=p=>{var k=Ut(),h=a(k),f=o(a(h),2);$(()=>{e(A),De(()=>{})});var _=a(f);_.value=_.__value="";var re=o(_);oe(re,1,()=>He,ie,(S,m)=>{var u=Tt(),J=a(u,!0);r(u);var B={};$(K=>{g(J,K),B!==(B=e(m))&&(u.value=(u.__value=e(m))??"")},[()=>(e(m),l(()=>e(m).toUpperCase()))]),n(S,u)}),r(f),r(h);var se=o(h,2),H=o(a(se),2);$(()=>{e(R),De(()=>{})});var O=a(H);O.value=O.__value="";var pe=o(O);oe(pe,1,()=>Je,ie,(S,m)=>{var u=Nt(),J=a(u,!0);r(u);var B={};$(K=>{g(J,K),B!==(B=e(m))&&(u.value=(u.__value=e(m))??"")},[()=>(e(m),l(()=>e(m).toUpperCase()))]),n(S,u)}),r(H),r(se),r(k),Fe(f,()=>e(A),S=>c(A,S)),Fe(H,()=>e(R),S=>c(R,S)),n(p,k)};W(C,p=>{e(te)&&p(t)})}pt(z,()=>e(F),p=>c(F,p)),n(s,v)},$$slots:{default:!0}});var Ue=o(Ne,2),qe=a(Ue);{var et=s=>{var i=ge(),v=T(i);oe(v,0,()=>Array(5),ie,(d,L)=>{le(d,{padding:"p-5",children:(y,z)=>{var E=zt(),C=T(E),t=a(C);Z(t,{width:"80px",height:"24px"});var p=o(t,2);Z(p,{width:"100px",height:"24px"}),r(C);var k=o(C,2);Z(k,{width:"60%",height:"1.5rem",className:"mb-3"});var h=o(k,2),f=a(h);Z(f,{width:"120px",height:"1rem"});var _=o(f,2);Z(_,{width:"100px",height:"1rem"}),r(h),n(y,E)},$$slots:{default:!0}})}),n(s,i)},tt=s=>{var i=ge(),v=T(i);{var d=y=>{le(y,{padding:"p-16",className:"text-center",children:(z,E)=>{var C=Bt(),t=T(C),p=a(t);$t(p,{class:"w-12 h-12 text-surface-200"}),r(t);var k=o(t,6);X(k,{variant:"ghost",className:"mt-6",$$events:{click:()=>{c(F,""),c(A,""),c(R,"")}},children:(h,f)=>{U();var _=Q("Limpar Filtros");n(h,_)},$$slots:{default:!0}}),n(z,C)},$$slots:{default:!0}})},L=y=>{var z=ge(),E=T(z);oe(E,1,()=>e(q),ie,(C,t)=>{le(C,{interactive:!0,padding:"p-5",className:"group",$$events:{click:()=>be(`/solicitacao/${e(t).id}`)},children:(p,k)=>{var h=Et(),f=T(h),_=a(f),re=a(_);de(re,{variant:"neutral",className:"bg-surface-900 text-white border-none",children:(x,b)=>{U();var N=Q();$(()=>g(N,`#${e(t),l(()=>e(t).sequential_id)??""}`)),n(x,N)},$$slots:{default:!0}});var se=o(re,2);{let x=V(()=>(e(t),l(()=>e(t).status==="concluido"||e(t).status==="faturado"?"success":"warning")));de(se,{get variant(){return e(x)},children:(b,N)=>{U();var D=Q();$(xe=>g(D,xe),[()=>(e(t),l(()=>e(t).status.replace("_"," ")))]),n(b,D)},$$slots:{default:!0}})}r(_);var H=o(_,2);wt(H,{class:"w-5 h-5 text-surface-300 group-hover:text-brand-500 group-hover:translate-x-1 transition-all"}),r(f);var O=o(f,2),pe=a(O,!0);r(O);var S=o(O,2),m=a(S),u=a(m),J=a(u,!0);r(u);var B=o(u,2),K=a(B,!0);r(B),r(m);var ze=o(m,2);{var rt=x=>{var b=At(),N=a(b);kt(N,{class:"w-4 h-4 text-surface-400"});var D=o(N);r(b),$(()=>g(D,` ${e(t),l(()=>e(t).location_name)??""}`)),n(x,b)};W(ze,x=>{e(t),l(()=>e(t).location_name)&&x(rt)})}var Be=o(ze,2),Ae=a(Be);yt(Ae,{class:"w-4 h-4 text-surface-400"});var st=o(Ae);r(Be),r(S);var Re=o(S,2),_e=a(Re),Ee=a(_e),me=o(Ee,2),ot=a(me);r(me),r(_e);var it=o(_e,2);{var nt=x=>{var b=Rt(),N=a(b);St(N,{class:"w-4 h-4 text-surface-400"});var D=o(N,2),xe=a(D,!0);r(D),r(b),$(()=>g(xe,(e(t),l(()=>e(t).technician_name)))),n(x,b)};W(it,x=>{e(t),l(()=>e(t).technician_name)&&x(nt)})}r(Re),$((x,b)=>{g(pe,(e(t),l(()=>e(t).titulo))),g(J,x),g(K,(e(t),l(()=>e(t).client_name||"-"))),g(st,` ${b??""}`),ne(Ee,1,`w-2 h-2 rounded-full ${e(t),l(()=>e(t).priority==="critica"?"bg-red-500 animate-pulse":e(t).priority==="alta"?"bg-orange-500":"bg-brand-500")??""}`),ne(me,1,`text-[10px] font-black uppercase tracking-widest ${e(t),l(()=>e(t).priority==="critica"?"text-red-600":"text-surface-500")??""}`),g(ot,`Prioridade ${e(t),l(()=>e(t).priority)??""}`)},[()=>(e(t),l(()=>e(t).client_name?.charAt(0)||"?")),()=>(e(t),l(()=>Qe(e(t).created_at)))]),n(p,h)},$$slots:{default:!0}})}),n(y,z)};W(v,y=>{e(q),l(()=>e(q).length===0)?y(d):y(L,!1)},!0)}n(s,i)};W(qe,s=>{e($e)?s(et):s(tt,!1)})}r(Ue),r(ce);var je=o(ce,2),at=a(je);X(at,{variant:"primary",size:"lg",className:"rounded-full w-14 h-14 p-0 shadow-2xl shadow-brand-400",$$events:{click:()=>be("/nova-solicitacao")},children:(s,i)=>{Le(s,{class:"w-8 h-8"})},$$slots:{default:!0}}),r(je),$(()=>{ne(Y,1,`flex-1 flex items-center justify-center gap-3 py-3 rounded-xl font-bold text-sm transition-all ${e(j)==="aberto"?"bg-white text-brand-600 shadow-sm":"text-surface-500 hover:text-surface-700"}`),ne(ae,1,`flex-1 flex items-center justify-center gap-3 py-3 rounded-xl font-bold text-sm transition-all ${e(j)==="finalizado"?"bg-white text-brand-600 shadow-sm":"text-surface-500 hover:text-surface-700"}`)}),Oe("click",Y,()=>c(j,"aberto")),Oe("click",ae,()=>c(j,"finalizado")),n(Ie,ye),ut()}export{ia as component};
