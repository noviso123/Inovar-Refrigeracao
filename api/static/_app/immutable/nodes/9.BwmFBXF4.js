import{f as g,a as n,t as E,e as fe,s as B,c as pe}from"../chunks/DXVr3TX4.js";import{i as Ie}from"../chunks/CL5J6ee3.js";import{p as Te,o as De,l as Le,a as qe,f as V,b as Ee,g as e,m as _,c as t,t as I,s,d,e as Ve,n as k,r as a,u as A,i as he,G as We}from"../chunks/yKYHuomA.js";import{i as T}from"../chunks/01UUdhOg.js";import{b as me,r as Fe,e as _e,i as xe}from"../chunks/TgNKz3rK.js";import{b as be}from"../chunks/BoqKQ0gE.js";import{g as ee}from"../chunks/1EbW75xl.js";import{B as W,C as ze}from"../chunks/CMzhJ-sK.js";import{I as Je}from"../chunks/Ul1sdv7C.js";import{B as Re}from"../chunks/Ba5MWzQS.js";import{M as Ue}from"../chunks/CaCDDUcm.js";import{S as te}from"../chunks/Cw1zHoOm.js";import{A as Ge}from"../chunks/C6ROW5sG.js";import{U as ge}from"../chunks/B2Nmx6HV.js";import{F as He}from"../chunks/D2EUOuic.js";import{S as Ke}from"../chunks/BjTjAT_z.js";import{P as Qe}from"../chunks/CnIMmsLf.js";import{M as Xe}from"../chunks/BMl328JV.js";import{C as we}from"../chunks/DGFeEg2X.js";import{C as Ye}from"../chunks/BUY1kFW0.js";import{C as Ze}from"../chunks/C8yvqpl4.js";var et=g('<button class="w-full group p-12 border-2 border-dashed border-surface-200 rounded-3xl flex flex-col items-center justify-center gap-4 hover:border-brand-500 hover:bg-brand-50/30 transition-all duration-300 svelte-1stzznh"><div class="w-16 h-16 rounded-full bg-surface-100 flex items-center justify-center group-hover:bg-brand-100 group-hover:scale-110 transition-all svelte-1stzznh"><!></div> <div class="text-center svelte-1stzznh"><p class="text-lg font-black text-surface-900 svelte-1stzznh">Selecionar Cliente</p> <p class="text-sm font-medium text-surface-500 svelte-1stzznh">Busque por nome ou CNPJ</p></div></button>'),tt=g('<div class="flex items-center gap-6 p-6 bg-brand-50/50 rounded-2xl border border-brand-100 animate-in fade-in slide-in-from-top-2 svelte-1stzznh"><div class="w-16 h-16 rounded-full bg-brand-600 flex items-center justify-center text-white text-2xl font-black svelte-1stzznh"> </div> <div class="flex-1 svelte-1stzznh"><p class="text-xl font-black text-surface-900 svelte-1stzznh"> </p> <div class="flex items-center gap-2 mt-1 text-brand-700 font-bold svelte-1stzznh"><!> </div></div> <!></div>'),at=g('<div class="flex items-center justify-between mb-6 svelte-1stzznh"><h2 class="text-sm font-black uppercase tracking-widest text-surface-400 flex items-center gap-2 svelte-1stzznh"><!> Cliente Responsável</h2> <!></div> <!>',1),st=g('<h2 class="text-sm font-black uppercase tracking-widest text-surface-400 mb-8 flex items-center gap-2 svelte-1stzznh"><!> Detalhes do Chamado</h2> <div class="space-y-6 svelte-1stzznh"><div class="grid grid-cols-1 md:grid-cols-2 gap-6 svelte-1stzznh"><div class="space-y-2 svelte-1stzznh"><label class="text-xs font-black uppercase tracking-widest text-surface-500 ml-1 svelte-1stzznh">Tipo de Serviço</label> <select class="w-full h-12 px-4 bg-surface-50 border border-surface-200 rounded-xl font-bold text-surface-900 outline-none focus:border-brand-500 focus:ring-4 focus:ring-brand-500/10 transition-all appearance-none svelte-1stzznh"><option class="svelte-1stzznh">Manutenção Corretiva</option><option class="svelte-1stzznh">Manutenção Preventiva</option><option class="svelte-1stzznh">Instalação</option><option class="svelte-1stzznh">Inspeção / Visita Técnica</option></select></div> <div class="space-y-2 svelte-1stzznh"><label class="text-xs font-black uppercase tracking-widest text-surface-500 ml-1 svelte-1stzznh">Prioridade</label> <select class="w-full h-12 px-4 bg-surface-50 border border-surface-200 rounded-xl font-bold text-surface-900 outline-none focus:border-brand-500 focus:ring-4 focus:ring-brand-500/10 transition-all appearance-none svelte-1stzznh"><option class="svelte-1stzznh">Baixa</option><option class="svelte-1stzznh">Média</option><option class="svelte-1stzznh">Alta</option><option class="svelte-1stzznh">Crítica / Emergência</option></select></div></div> <!> <div class="space-y-2 svelte-1stzznh"><label class="text-xs font-black uppercase tracking-widest text-surface-500 ml-1 svelte-1stzznh">Descrição Detalhada</label> <textarea class="w-full min-h-[160px] p-4 bg-surface-50 border border-surface-200 rounded-2xl font-bold text-surface-900 outline-none focus:border-brand-500 focus:ring-4 focus:ring-brand-500/10 transition-all svelte-1stzznh" placeholder="Descreva com mais detalhes o que está acontecendo..."></textarea></div></div>',1),rt=g(`<p class="text-center text-xs font-bold text-surface-400 mt-4 flex items-center justify-center gap-2 svelte-1stzznh"><!> Preencha o cliente e o título
                    para continuar</p>`),lt=g('<div class="p-4 bg-surface-50 rounded-2xl flex items-center gap-4 svelte-1stzznh"><!> <div class="flex-1 space-y-2 svelte-1stzznh"><!> <!></div></div>'),ot=g('<p class="text-xs font-bold text-surface-400 group-hover:text-brand-500 svelte-1stzznh"> </p>'),nt=g('<button class="w-full p-4 rounded-2xl hover:bg-brand-50 flex items-center gap-4 text-left transition-all group svelte-1stzznh"><div class="w-12 h-12 rounded-full bg-surface-100 flex items-center justify-center text-surface-600 font-black group-hover:bg-brand-600 group-hover:text-white transition-all svelte-1stzznh"> </div> <div class="flex-1 svelte-1stzznh"><p class="font-black text-surface-900 group-hover:text-brand-700 svelte-1stzznh"> </p> <!></div> <!></button>'),it=g('<div class="py-12 text-center svelte-1stzznh"><!> <p class="text-surface-400 font-bold svelte-1stzznh">Nenhum cliente encontrado.</p></div>'),ct=g('<div class="space-y-6 svelte-1stzznh"><div class="relative svelte-1stzznh"><!> <input type="text" placeholder="Buscar por nome..." class="w-full h-14 pl-12 pr-4 bg-surface-50 border border-surface-200 rounded-2xl font-bold text-surface-900 outline-none focus:border-brand-500 transition-all svelte-1stzznh"/></div> <div class="max-h-[400px] overflow-y-auto space-y-2 pr-2 custom-scrollbar svelte-1stzznh"><!></div></div>'),vt=g('<div class="fixed inset-0 z-[100] flex items-center justify-center p-4 animate-in fade-in duration-300 svelte-1stzznh"><div class="absolute inset-0 bg-surface-900/60 backdrop-blur-md svelte-1stzznh"></div> <div class="relative bg-white rounded-[40px] p-10 text-center max-w-sm w-full shadow-2xl scale-in-center svelte-1stzznh"><div class="w-24 h-24 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-8 animate-bounce svelte-1stzznh"><!></div> <!> <h3 class="text-3xl font-black text-surface-900 tracking-tight mb-2 svelte-1stzznh">Sucesso!</h3> <p class="text-surface-500 font-bold mb-10 svelte-1stzznh">A ordem de serviço foi aberta e já está disponível no sistema.</p> <div class="space-y-3 svelte-1stzznh"><!> <!></div></div></div>'),dt=g('<div class="min-h-screen bg-surface-50 pb-24 svelte-1stzznh"><div class="sticky top-0 z-40 bg-white/80 backdrop-blur-md border-b border-surface-200 px-4 py-4 svelte-1stzznh"><div class="max-w-4xl mx-auto flex items-center gap-4 svelte-1stzznh"><!> <h1 class="text-2xl font-black text-surface-900 tracking-tight svelte-1stzznh">Nova Solicitação</h1></div></div> <div class="max-w-4xl mx-auto px-4 py-8 space-y-8 svelte-1stzznh"><!> <!> <div class="pt-4 svelte-1stzznh"><!> <!></div></div></div> <!> <!>',1);function Mt($e,ye){Te(ye,!1);const ae=_();let Q=_([]),se=_(!0),F=_(!1),re=_(!1),J=_(null),D=_(""),R=_(""),U=_("media"),G=_("corretiva"),b=_(null),L=_(null),H=_(!1),K=_("");async function ke(){try{const r=localStorage.getItem("token"),i=await fetch("/api/clientes",{headers:{Authorization:`Bearer ${r}`}});i.ok&&d(Q,await i.json())}catch(r){console.error("Erro ao carregar clientes:",r)}finally{d(se,!1)}}function Ce(r){d(b,r),d(L,r.locations?.[0]||null),d(H,!1)}async function Se(){if(e(b)){d(F,!0);try{const r=localStorage.getItem("token"),i={titulo:e(D)||e(R),descricao_detalhada:e(R),priority:e(U),service_type:e(G),cliente_id:e(b).id,local_id:e(L)?.id||null,status:"pendente"},c=await fetch("/api/solicitacoes",{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify(i)});c.ok&&(d(J,await c.json()),d(re,!0))}catch(r){console.error("Erro ao criar OS:",r)}finally{d(F,!1)}}}De(()=>{ke()}),Le(()=>(e(Q),e(K)),()=>{d(ae,e(Q).filter(r=>r.nome.toLowerCase().includes(e(K).toLowerCase())))}),qe(),Ie();var le=dt(),X=V(le),Y=t(X),oe=t(Y),Pe=t(oe);W(Pe,{variant:"ghost",size:"sm",className:"p-2",$$events:{click:()=>ee("/solicitacoes")},children:(r,i)=>{Ge(r,{class:"w-5 h-5"})},$$slots:{default:!0}}),k(2),a(oe),a(Y);var ne=s(Y,2),ie=t(ne);ze(ie,{padding:"p-8",children:(r,i)=>{var c=at(),u=V(c),C=t(u),S=t(C);ge(S,{class:"w-4 h-4"}),k(),a(C);var w=s(C,2);{var P=l=>{W(l,{variant:"ghost",size:"sm",className:"text-red-500",$$events:{click:()=>d(b,null)},children:(p,h)=>{k();var o=E("Trocar Cliente");n(p,o)},$$slots:{default:!0}})};T(w,l=>{e(b)&&l(P)})}a(u);var j=s(u,2);{var x=l=>{var p=et(),h=t(p),o=t(h);Qe(o,{class:"w-8 h-8 text-surface-400 group-hover:text-brand-600"}),a(h),k(2),a(p),fe("click",p,()=>d(H,!0)),n(l,p)},f=l=>{var p=tt(),h=t(p),o=t(h,!0);a(h);var v=s(h,2),m=t(v),N=t(m,!0);a(m);var z=s(m,2),$=t(z);Xe($,{class:"w-4 h-4"});var M=s($);a(z),a(v);var O=s(v,2);we(O,{class:"w-8 h-8 text-brand-600"}),a(p),I(y=>{B(o,y),B(N,(e(b),A(()=>e(b).nome))),B(M,` ${e(L),A(()=>e(L)?.nickname||e(L)?.city||"Local não definido")??""}`)},[()=>(e(b),A(()=>e(b).nome.charAt(0)))]),n(l,p)};T(j,l=>{e(b)?l(f,!1):l(x)})}n(r,c)},$$slots:{default:!0}});var ce=s(ie,2);ze(ce,{padding:"p-8",children:(r,i)=>{var c=st(),u=V(c),C=t(u);He(C,{class:"w-4 h-4"}),k(),a(u);var S=s(u,2),w=t(S),P=t(w),j=s(t(P),2);I(()=>{e(G),he(()=>{})});var x=t(j);x.value=x.__value="corretiva";var f=s(x);f.value=f.__value="preventiva";var l=s(f);l.value=l.__value="instalacao";var p=s(l);p.value=p.__value="inspecao",a(j),a(P);var h=s(P,2),o=s(t(h),2);I(()=>{e(U),he(()=>{})});var v=t(o);v.value=v.__value="baixa";var m=s(v);m.value=m.__value="media";var N=s(m);N.value=N.__value="alta";var z=s(N);z.value=z.__value="critica",a(o),a(h),a(w);var $=s(w,2);Je($,{label:"Título / Problema Resumido",placeholder:"Ex: Ar condicionado não está gelando",get value(){return e(D)},set value(y){d(D,y)},$$legacy:!0});var M=s($,2),O=s(t(M),2);We(O),a(M),a(S),me(j,()=>e(G),y=>d(G,y)),me(o,()=>e(U),y=>d(U,y)),be(O,()=>e(R),y=>d(R,y)),n(r,c)},$$slots:{default:!0}});var ve=s(ce,2),de=t(ve);{let r=Ve(()=>e(F)||!e(b)||!e(D));W(de,{variant:"primary",fullWidth:!0,className:"h-16 text-lg shadow-xl shadow-brand-500/20",get disabled(){return e(r)},get loading(){return e(F)},$$events:{click:Se},children:(i,c)=>{k();var u=E("Criar Ordem de Serviço");n(i,u)},$$slots:{default:!0}})}var Ne=s(de,2);{var je=r=>{var i=rt(),c=t(i);Ze(c,{class:"w-3 h-3"}),k(),a(i),n(r,i)};T(Ne,r=>{(!e(b)||!e(D))&&r(je)})}a(ve),a(ne),a(X);var ue=s(X,2);Ue(ue,{get isOpen(){return e(H)},title:"Selecionar Cliente",onClose:()=>d(H,!1),children:(r,i)=>{var c=ct(),u=t(c),C=t(u);Ke(C,{class:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-surface-400"});var S=s(C,2);Fe(S),a(u);var w=s(u,2),P=t(w);{var j=f=>{var l=pe(),p=V(l);_e(p,0,()=>Array(5),xe,(h,o)=>{var v=lt(),m=t(v);te(m,{className:"w-12 h-12 rounded-full"});var N=s(m,2),z=t(N);te(z,{className:"w-1/2 h-4"});var $=s(z,2);te($,{className:"w-1/3 h-3"}),a(N),a(v),n(h,v)}),n(f,l)},x=f=>{var l=pe(),p=V(l);_e(p,1,()=>e(ae),xe,(h,o)=>{var v=nt(),m=t(v),N=t(m,!0);a(m);var z=s(m,2),$=t(z),M=t($,!0);a($);var O=s($,2);{var y=q=>{var Z=ot(),Oe=t(Z,!0);a(Z),I(()=>B(Oe,(e(o),A(()=>e(o).locations[0].city)))),n(q,Z)};T(O,q=>{e(o),A(()=>e(o).locations?.[0])&&q(y)})}a(z);var Me=s(z,2);Ye(Me,{class:"w-5 h-5 text-surface-300 group-hover:text-brand-500 group-hover:translate-x-1 transition-all"}),a(v),I(q=>{B(N,q),B(M,(e(o),A(()=>e(o).nome)))},[()=>(e(o),A(()=>e(o).nome.charAt(0)))]),fe("click",v,()=>Ce(e(o))),n(h,v)},h=>{var o=it(),v=t(o);ge(v,{class:"w-12 h-12 text-surface-200 mx-auto mb-4"}),k(2),a(o),n(h,o)}),n(f,l)};T(P,f=>{e(se)?f(j):f(x,!1)})}a(w),a(c),be(S,()=>e(K),f=>d(K,f)),n(r,c)},$$slots:{default:!0}});var Ae=s(ue,2);{var Be=r=>{var i=vt(),c=s(t(i),2),u=t(c),C=t(u);we(C,{class:"w-12 h-12"}),a(u);var S=s(u,2);Re(S,{variant:"success",size:"lg",className:"mb-4",children:(x,f)=>{k();var l=E();I(()=>B(l,`OS #${e(J),A(()=>e(J)?.sequential_id)??""}`)),n(x,l)},$$slots:{default:!0}});var w=s(S,6),P=t(w);W(P,{variant:"primary",fullWidth:!0,className:"h-14 text-lg",$$events:{click:()=>ee(`/solicitacao/${e(J)?.id}`)},children:(x,f)=>{k();var l=E("Ver Detalhes");n(x,l)},$$slots:{default:!0}});var j=s(P,2);W(j,{variant:"ghost",fullWidth:!0,className:"h-14 text-surface-500",$$events:{click:()=>ee("/solicitacoes")},children:(x,f)=>{k();var l=E("Voltar para Lista");n(x,l)},$$slots:{default:!0}}),a(w),a(c),a(i),n(r,i)};T(Ae,r=>{e(re)&&r(Be)})}n($e,le),Ee()}export{Mt as component};
