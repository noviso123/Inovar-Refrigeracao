import{f as P,a as u,t as ce,c as Ye,s as z}from"../chunks/DXVr3TX4.js";import{i as Ze}from"../chunks/CL5J6ee3.js";import{p as ea,o as aa,l as ra,a as ta,f as G,g as e,b as sa,c as t,s,d as c,m as j,n as g,r as a,h as n,t as ve,i as oa,e as la,u as M}from"../chunks/yKYHuomA.js";import{i as ye}from"../chunks/01UUdhOg.js";import{r as ia,b as da,e as Me,i as Te}from"../chunks/TgNKz3rK.js";import{b as na}from"../chunks/BoqKQ0gE.js";import{B as T,C as Ae}from"../chunks/CMzhJ-sK.js";import{I as h}from"../chunks/Ul1sdv7C.js";import{B as ca}from"../chunks/Ba5MWzQS.js";import{M as va}from"../chunks/CaCDDUcm.js";import{S as se}from"../chunks/Cw1zHoOm.js";import{U as Le}from"../chunks/C2dVUy_s.js";import{S as ua}from"../chunks/BjTjAT_z.js";import{P as pa}from"../chunks/CnIMmsLf.js";import{B as ma}from"../chunks/Cw7UC6b6.js";import{M as Fe}from"../chunks/BMl328JV.js";import{F as fa}from"../chunks/D2EUOuic.js";import{C as _a}from"../chunks/BFNN5dmS.js";import{S as ga}from"../chunks/CAPDtyWD.js";import{T as ha}from"../chunks/B4UXOIAF.js";import{M as xa}from"../chunks/HN8t3Ydv.js";import{P as ba}from"../chunks/Cf_jCYCW.js";import{C as $a}from"../chunks/BUY1kFW0.js";var wa=P("<!> Novo Cliente",1),ya=P('<div class="flex items-center gap-4 mb-6"><!> <div class="flex-1 space-y-2"><!> <!></div></div> <div class="space-y-3"><!> <!></div>',1),Ca=P('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>'),ka=P('<div class="py-20 text-center bg-white rounded-[3rem] border-2 border-dashed border-surface-200"><div class="w-24 h-24 bg-surface-50 rounded-full flex items-center justify-center mx-auto mb-6"><!></div> <h3 class="text-2xl font-black text-surface-900">Nenhum cliente encontrado</h3> <p class="text-surface-500 font-bold mt-2 max-w-sm mx-auto"> </p> <!></div>'),Pa=P("Ver Detalhes <!>",1),Na=P('<div class="flex items-start justify-between mb-6"><div class="flex items-center gap-4"><div class="w-14 h-14 rounded-2xl bg-brand-50 text-brand-600 flex items-center justify-center font-black text-2xl group-hover:bg-brand-600 group-hover:text-white transition-all duration-300"> </div> <div class="min-w-0"><h3 class="font-black text-surface-900 truncate group-hover:text-brand-700 transition-colors"> </h3> <!></div></div> <div class="flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity"><!> <!></div></div> <div class="space-y-4"><div class="flex items-center gap-3 text-sm font-bold text-surface-500"><div class="w-8 h-8 rounded-lg bg-surface-50 flex items-center justify-center text-surface-400"><!></div> <span class="truncate"> </span></div> <div class="flex items-center gap-3 text-sm font-bold text-surface-500"><div class="w-8 h-8 rounded-lg bg-surface-50 flex items-center justify-center text-surface-400"><!></div> <span> </span></div> <div class="flex items-center gap-3 text-sm font-bold text-surface-500"><div class="w-8 h-8 rounded-lg bg-surface-50 flex items-center justify-center text-surface-400"><!></div> <span class="truncate"> </span></div></div> <div class="mt-8 pt-6 border-t border-surface-100"><!></div>',1),Sa=P('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>'),ja=P('<div class="space-y-8 py-4"><div class="space-y-6"><h4 class="text-xs font-black text-surface-400 uppercase tracking-widest flex items-center gap-2"><!> Informações Básicas</h4> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div class="md:col-span-2"><!></div> <!> <!> <!> <!></div></div> <div class="space-y-6"><h4 class="text-xs font-black text-surface-400 uppercase tracking-widest flex items-center gap-2"><!> Endereço</h4> <div class="grid grid-cols-12 gap-6"><div class="col-span-4"><!></div> <div class="col-span-8"><!></div> <div class="col-span-4"><!></div> <div class="col-span-8"><!></div> <div class="col-span-5"><!></div> <div class="col-span-5"><!></div> <div class="col-span-2"><!></div></div></div> <div class="space-y-6"><h4 class="text-xs font-black text-surface-400 uppercase tracking-widest flex items-center gap-2"><!> Configurações de Serviço</h4> <div class="p-6 bg-brand-50/50 rounded-2xl border border-brand-100 flex items-center justify-between"><div class="flex items-center gap-4"><div class="w-12 h-12 bg-white rounded-xl shadow-sm flex items-center justify-center text-brand-600"><!></div> <div><p class="text-sm font-black text-brand-900">Período de Manutenção</p> <p class="text-xs font-bold text-brand-700 opacity-75">Intervalo recomendado entre visitas</p></div></div> <select class="h-12 px-4 bg-white border border-brand-200 rounded-xl font-bold text-brand-900 outline-none focus:border-brand-500 transition-all"><option>3 meses</option><option>6 meses</option><option>12 meses</option></select></div></div> <div class="pt-6 flex gap-4"><!> <!></div></div>'),Ea=P('<div class="min-h-screen bg-surface-50 pb-24"><div class="bg-white border-b border-surface-200 px-4 py-8"><div class="max-w-7xl mx-auto flex flex-col md:flex-row md:items-center justify-between gap-6"><div><h1 class="text-4xl font-black text-surface-900 tracking-tight flex items-center gap-3"><!> Clientes</h1> <p class="text-surface-500 font-bold mt-2">Gerencie sua base de clientes e contatos comerciais</p></div> <!></div></div> <div class="max-w-7xl mx-auto px-4 py-8 space-y-8"><div class="relative group"><!> <input type="text" placeholder="Buscar por nome, email, CPF ou CNPJ..." class="w-full h-16 pl-16 pr-6 bg-white border border-surface-200 rounded-[2rem] font-bold text-surface-900 outline-none focus:border-brand-500 focus:ring-8 focus:ring-brand-500/5 transition-all shadow-sm"/></div> <!></div></div> <!>',1);function er(Ie,De){ea(De,!1);const oe=j();let ue=j([]),Ce=j(!0),A=j(!1),L=j(null),pe=j(!1),w=j(""),r=j({nome:"",email:"",telefone:"",cpf:"",cnpj:"",cep:"",logradouro:"",numero:"",complemento:"",bairro:"",cidade:"",estado:"",periodo_manutencao:6});async function me(){try{const o=localStorage.getItem("token"),d=await fetch("/api/clientes",{headers:{Authorization:`Bearer ${o}`}});d.ok&&c(ue,await d.json())}catch(o){console.error("Erro ao carregar clientes:",o)}finally{c(Ce,!1)}}async function Je(){c(pe,!0);try{const o=localStorage.getItem("token"),d=e(L)?"PUT":"POST",v=e(L)?`/api/clientes/${e(L).id}`:"/api/clientes";(await fetch(v,{method:d,headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify(e(r))})).ok&&(c(A,!1),ke(),await me())}catch(o){console.error("Erro ao salvar:",o)}finally{c(pe,!1)}}async function Ue(o){if(confirm("Excluir este cliente?"))try{const d=localStorage.getItem("token");await fetch(`/api/clientes/${o}`,{method:"DELETE",headers:{Authorization:`Bearer ${d}`}}),await me()}catch(d){console.error("Erro ao excluir:",d)}}async function Oe(){if(!(e(r).cep.length<8))try{const o=e(r).cep.replace(/\D/g,""),d=await fetch(`https://viacep.com.br/ws/${o}/json/`);if(d.ok){const v=await d.json();v.erro||(n(r,e(r).logradouro=v.logradouro||""),n(r,e(r).bairro=v.bairro||""),n(r,e(r).cidade=v.localidade||""),n(r,e(r).estado=v.uf||""))}}catch(o){console.error("Erro ao buscar CEP:",o)}}function ke(){c(r,{nome:"",email:"",telefone:"",cpf:"",cnpj:"",cep:"",logradouro:"",numero:"",complemento:"",bairro:"",cidade:"",estado:"",periodo_manutencao:6}),c(L,null)}function Pe(o){c(L,o),c(r,{...o}),c(A,!0)}function We(){ke(),c(A,!0)}aa(()=>{me()}),ra(()=>(e(ue),e(w)),()=>{c(oe,e(ue).filter(o=>o.nome.toLowerCase().includes(e(w).toLowerCase())||o.email?.toLowerCase().includes(e(w).toLowerCase())||o.cpf?.includes(e(w))||o.cnpj?.includes(e(w))))}),ta(),Ze();var Ne=Ea(),fe=G(Ne),_e=t(fe),Se=t(_e),ge=t(Se),je=t(ge),qe=t(je);Le(qe,{class:"w-10 h-10 text-brand-600"}),g(),a(je),g(2),a(ge);var Re=s(ge,2);T(Re,{variant:"primary",size:"lg",className:"shadow-xl shadow-brand-500/20",$$events:{click:We},children:(o,d)=>{var v=wa(),C=G(v);pa(C,{class:"w-5 h-5 mr-2"}),g(),u(o,v)},$$slots:{default:!0}}),a(Se),a(_e);var Ee=s(_e,2),he=t(Ee),Be=t(he);ua(Be,{class:"absolute left-6 top-1/2 -translate-y-1/2 w-6 h-6 text-surface-400 group-focus-within:text-brand-500 transition-colors"});var ze=s(Be,2);ia(ze),a(he);var Ge=s(he,2);{var Qe=o=>{var d=Ca();Me(d,4,()=>Array(6),Te,(v,C)=>{Ae(v,{padding:"p-6",children:(E,x)=>{var m=ya(),f=G(m),i=t(f);se(i,{className:"w-14 h-14 rounded-2xl"});var y=s(i,2),N=t(y);se(N,{className:"w-3/4 h-5"});var k=s(N,2);se(k,{className:"w-1/2 h-3"}),a(y),a(f);var b=s(f,2),_=t(b);se(_,{className:"w-full h-4"});var $=s(_,2);se($,{className:"w-full h-4"}),a(b),u(E,m)},$$slots:{default:!0}})}),a(d),u(o,d)},Ve=o=>{var d=Ye(),v=G(d);{var C=x=>{var m=ka(),f=t(m),i=t(f);Le(i,{class:"w-12 h-12 text-surface-200"}),a(f);var y=s(f,4),N=t(y,!0);a(y);var k=s(y,2);{var b=_=>{T(_,{variant:"ghost",className:"mt-6",$$events:{click:()=>c(w,"")},children:($,F)=>{g();var I=ce("Limpar Busca");u($,I)},$$slots:{default:!0}})};ye(k,_=>{e(w)&&_(b)})}a(m),ve(()=>z(N,e(w)?"Não encontramos resultados para sua busca. Tente outros termos.":"Sua base de clientes está vazia. Comece cadastrando um novo cliente.")),u(x,m)},E=x=>{var m=Sa();Me(m,5,()=>e(oe),Te,(f,i)=>{Ae(f,{padding:"p-6",className:"group hover:border-brand-500 hover:shadow-2xl hover:shadow-brand-500/10 transition-all duration-300",children:(y,N)=>{var k=Na(),b=G(k),_=t(b),$=t(_),F=t($,!0);a($);var I=s($,2),D=t(I),Q=t(D,!0);a(D);var xe=s(D,2);ca(xe,{variant:"neutral",size:"sm",className:"mt-1",children:(p,R)=>{g();var S=ce();ve(()=>z(S,(e(i),M(()=>e(i).cnpj?"Pessoa Jurídica":"Pessoa Física")))),u(p,S)},$$slots:{default:!0}}),a(I),a(_);var J=s(_,2),le=t(J);T(le,{variant:"ghost",size:"sm",className:"p-2",$$events:{click:()=>Pe(e(i))},children:(p,R)=>{ga(p,{class:"w-4 h-4"})},$$slots:{default:!0}});var V=s(le,2);T(V,{variant:"ghost",size:"sm",className:"p-2 text-red-500 hover:bg-red-50",$$events:{click:()=>Ue(e(i).id)},children:(p,R)=>{ha(p,{class:"w-4 h-4"})},$$slots:{default:!0}}),a(J),a(b);var H=s(b,2),B=t(H),K=t(B),X=t(K);xa(X,{class:"w-4 h-4"}),a(K);var ie=s(K,2),Y=t(ie,!0);a(ie),a(B);var Z=s(B,2),U=t(Z),be=t(U);ba(be,{class:"w-4 h-4"}),a(U);var O=s(U,2),ee=t(O,!0);a(O),a(Z);var de=s(Z,2),W=t(de),ae=t(W);Fe(ae,{class:"w-4 h-4"}),a(W);var re=s(W,2),$e=t(re,!0);a(re),a(de),a(H);var q=s(H,2),te=t(q);T(te,{variant:"secondary",fullWidth:!0,$$events:{click:()=>Pe(e(i))},children:(p,R)=>{g();var S=Pa(),ne=s(G(S));$a(ne,{class:"w-4 h-4 ml-2"}),u(p,S)},$$slots:{default:!0}}),a(q),ve(p=>{z(F,p),z(Q,(e(i),M(()=>e(i).nome))),z(Y,(e(i),M(()=>e(i).email||"Sem email"))),z(ee,(e(i),M(()=>e(i).telefone||"Sem telefone"))),z($e,(e(i),M(()=>e(i).cidade?`${e(i).cidade} - ${e(i).estado}`:"Sem endereço")))},[()=>(e(i),M(()=>e(i).nome.charAt(0).toUpperCase()))]),u(y,k)},$$slots:{default:!0}})}),a(m),u(x,m)};ye(v,x=>{e(oe),M(()=>e(oe).length===0)?x(C):x(E,!1)},!0)}u(o,d)};ye(Ge,o=>{e(Ce)?o(Qe):o(Ve,!1)})}a(Ee),a(fe);var He=s(fe,2);{let o=la(()=>e(L)?"Editar Cliente":"Novo Cliente");va(He,{get isOpen(){return e(A)},get title(){return e(o)},onClose:()=>c(A,!1),children:(d,v)=>{var C=ja(),E=t(C),x=t(E),m=t(x);ma(m,{class:"w-3 h-3"}),g(),a(x);var f=s(x,2),i=t(f),y=t(i);h(y,{label:"Nome Completo / Razão Social",placeholder:"Ex: João Silva ou Empresa LTDA",get value(){return e(r).nome},set value(l){n(r,e(r).nome=l)},$$legacy:!0}),a(i);var N=s(i,2);h(N,{label:"E-mail",type:"email",placeholder:"email@exemplo.com",get value(){return e(r).email},set value(l){n(r,e(r).email=l)},$$legacy:!0});var k=s(N,2);h(k,{label:"Telefone",placeholder:"(00) 00000-0000",get value(){return e(r).telefone},set value(l){n(r,e(r).telefone=l)},$$legacy:!0});var b=s(k,2);h(b,{label:"CPF",placeholder:"000.000.000-00",get value(){return e(r).cpf},set value(l){n(r,e(r).cpf=l)},$$legacy:!0});var _=s(b,2);h(_,{label:"CNPJ",placeholder:"00.000.000/0000-00",get value(){return e(r).cnpj},set value(l){n(r,e(r).cnpj=l)},$$legacy:!0}),a(f),a(E);var $=s(E,2),F=t($),I=t(F);Fe(I,{class:"w-3 h-3"}),g(),a(F);var D=s(F,2),Q=t(D),xe=t(Q);h(xe,{label:"CEP",placeholder:"00000-000",get value(){return e(r).cep},set value(l){n(r,e(r).cep=l)},$$events:{blur:Oe},$$legacy:!0}),a(Q);var J=s(Q,2),le=t(J);h(le,{label:"Logradouro",placeholder:"Rua, Avenida...",get value(){return e(r).logradouro},set value(l){n(r,e(r).logradouro=l)},$$legacy:!0}),a(J);var V=s(J,2),H=t(V);h(H,{label:"Número",placeholder:"123",get value(){return e(r).numero},set value(l){n(r,e(r).numero=l)},$$legacy:!0}),a(V);var B=s(V,2),K=t(B);h(K,{label:"Complemento",placeholder:"Apto, Sala, Bloco...",get value(){return e(r).complemento},set value(l){n(r,e(r).complemento=l)},$$legacy:!0}),a(B);var X=s(B,2),ie=t(X);h(ie,{label:"Bairro",get value(){return e(r).bairro},set value(l){n(r,e(r).bairro=l)},$$legacy:!0}),a(X);var Y=s(X,2),Z=t(Y);h(Z,{label:"Cidade",disabled:!0,get value(){return e(r).cidade},set value(l){n(r,e(r).cidade=l)},$$legacy:!0}),a(Y);var U=s(Y,2),be=t(U);h(be,{label:"UF",disabled:!0,get value(){return e(r).estado},set value(l){n(r,e(r).estado=l)},$$legacy:!0}),a(U),a(D),a($);var O=s($,2),ee=t(O),de=t(ee);fa(de,{class:"w-3 h-3"}),g(),a(ee);var W=s(ee,2),ae=t(W),re=t(ae),$e=t(re);_a($e,{class:"w-6 h-6"}),a(re),g(2),a(ae);var q=s(ae,2);ve(()=>{e(r),oa(()=>{})});var te=t(q);te.value=te.__value=3;var p=s(te);p.value=p.__value=6;var R=s(p);R.value=R.__value=12,a(q),a(W),a(O);var S=s(O,2),ne=t(S);T(ne,{variant:"secondary",fullWidth:!0,$$events:{click:()=>c(A,!1)},children:(l,Xe)=>{g();var we=ce("Cancelar");u(l,we)},$$slots:{default:!0}});var Ke=s(ne,2);T(Ke,{variant:"primary",fullWidth:!0,get loading(){return e(pe)},$$events:{click:Je},children:(l,Xe)=>{g();var we=ce("Salvar Cliente");u(l,we)},$$slots:{default:!0}}),a(S),a(C),da(q,()=>e(r).periodo_manutencao,l=>n(r,e(r).periodo_manutencao=l)),u(d,C)},$$slots:{default:!0}})}na(ze,()=>e(w),o=>c(w,o)),u(Ie,Ne),sa()}export{er as component};
