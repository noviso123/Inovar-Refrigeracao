# Render Configuration - Inovar Refrigeração Backend
# Native Python Web Service (no Docker)

services:
  - type: web
    name: inovar-backend
    runtime: docker
    dockerContext: .
    dockerfilePath: Dockerfile.render
    region: oregon
    plan: free
    
    # GitHub Branch
    branch: main
    
    # Auto-deploy from GitHub
    autoDeploy: true
    
    # Health Check
    healthCheckPath: /health
    
    # Environment Variables (PRE-FILLED)
    envVars:
      # WPPConnect Secret
      - key: WPPCONNECT_SECRET
        value: inovar-wpp-secret-2024
    
    # Auto-deploy from GitHub
    autoDeploy: true
    
    # Health Check
    healthCheckPath: /health
    
    # Environment Variables (PRE-FILLED)
    envVars:
      # Database - Supabase PostgreSQL Pooler
      - key: DATABASE_URL
        value: postgresql://postgres.apntpretjodygczbeozk:inovar862485@aws-1-sa-east-1.pooler.supabase.com:6543/postgres
      
      # Supabase Configuration
      - key: SUPABASE_URL
        value: https://apntpretjodygczbeozk.supabase.co
      
      - key: SUPABASE_SERVICE_KEY
        value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFwbnRwcmV0am9keWdjemJlb3prIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2NzY5MjMwNCwiZXhwIjoyMDgzMjY4MzA0fQ.XpjvDK7-FUy4Rw5mmWs781vGvylKg83Nsj69v_KS4uw
      
      - key: SUPABASE_KEY
        value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFwbnRwcmV0am9keWdjemJlb3prIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc2OTIzMDQsImV4cCI6MjA4MzI2ODMwNH0.KnoOP51Hyq3jgKnyylDR5wi5KhxqmUoT73pSrzh8Tu8

      # Security - JWT Secret Key
      - key: SECRET_KEY
        value: inovar-refrigeracao-secret-key-2024-secure
      
      # Python Settings
      - key: PYTHONUNBUFFERED
        value: "1"
      - key: PYTHONDONTWRITEBYTECODE
        value: "1"
      - key: PYTHONPATH
        value: "."
      - key: MALLOC_ARENA_MAX
        value: "2"
      - key: WEB_CONCURRENCY
        value: "1"
      
      # CORS - Allow all origins for production
      - key: CORS_ALLOW_ALL
        value: "true"
